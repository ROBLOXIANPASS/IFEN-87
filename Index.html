<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robux Premium | Loja Mobile</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0d0d12;
            --card: #16161e;
            --accent: #00c3ff;
            --green: #00ff88;
            --text: #ffffff;
            --text-dim: #94a3b8;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        
        body { 
            background-color: var(--bg); 
            color: var(--text); 
            display: flex; 
            flex-direction: column; 
            align-items: center;
            padding: 20px;
        }

        /* --- Layout --- */
        .container {
            width: 100%;
            max-width: 400px;
            margin-top: 20px;
        }

        header { text-align: center; margin-bottom: 30px; }
        header h1 { font-size: 1.8rem; font-weight: 900; }
        header h1 span { color: var(--accent); }

        /* --- Card Principal --- */
        .shop-card {
            background: var(--card);
            padding: 25px;
            border-radius: 20px;
            border: 1px solid #2d2d3d;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        /* Avatar */
        .profile-preview {
            display: none;
            flex-direction: column;
            align-items: center;
            margin-bottom: 20px;
            animation: fadeIn 0.4s ease;
        }
        .profile-preview img {
            width: 80px; height: 80px;
            border-radius: 50%;
            border: 3px solid var(--accent);
            background: #000;
        }
        .profile-preview p { font-size: 0.9rem; margin-top: 8px; font-weight: bold; }

        @keyframes fadeIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }

        /* Form */
        label { display: block; font-size: 0.75rem; color: var(--text-dim); margin-bottom: 8px; text-transform: uppercase; font-weight: bold; }
        
        input {
            width: 100%;
            padding: 14px;
            border-radius: 10px;
            border: 2px solid #2d2d3d;
            background: #0d0d12;
            color: #fff;
            margin-bottom: 15px;
            font-size: 1rem;
        }
        input:focus { border-color: var(--accent); outline: none; }
        input#amount { color: var(--green); font-weight: bold; font-size: 1.2rem; }

        /* Resultado */
        .display-result {
            background: #1f1f2b;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 20px;
        }
        .robux-count { display: block; font-size: 2.5rem; font-weight: 900; }
        .robux-label { font-size: 0.7rem; color: var(--accent); letter-spacing: 1px; }

        .btn-buy {
            width: 100%;
            padding: 16px;
            border-radius: 10px;
            border: none;
            background: var(--accent);
            color: #fff;
            font-weight: 800;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.3s;
        }
        .btn-buy:disabled { opacity: 0.2; cursor: not-allowed; }

        .error { color: #ff4444; font-size: 0.8rem; margin-top: -10px; margin-bottom: 10px; display: none; }

        footer { margin-top: 30px; font-size: 0.7rem; color: #555; text-align: center; }
    </style>
</head>
<body>

    <div class="container">
        <header>
            <h1>ROBUX<span>LOJA</span></h1>
            <p style="color: #666; font-size: 0.9rem;">Preço justo, entrega via Gamepass</p>
        </header>

        <div class="shop-card">
            <div class="profile-preview" id="previewArea">
                <img src="" id="userPhoto">
                <p id="userDisplayName"></p>
            </div>

            <label>Seu Nickname Roblox</label>
            <input type="text" id="nickname" placeholder="Ex: JogadorRoblox">
            <p id="nickError" class="error">Usuário não encontrado!</p>

            <label>Quanto quer pagar (R$)</label>
            <input type="number" id="amount" placeholder="Mínimo 5,00">
            <p id="valError" class="error">Valor entre R$ 5 e R$ 200.</p>

            <div class="display-result">
                <span class="robux-label">VOCÊ RECEBE</span>
                <span class="robux-count" id="robuxTotal">0</span>
                <span style="color: var(--green); font-weight: bold;">R$ <span id="cashDisplay">0,00</span></span>
            </div>

            <button id="mainBtn" class="btn-buy" disabled>PROSSEGUIR</button>
        </div>

        <footer>
            &copy; 2026 - Este site não possui vínculo com Roblox Corp.
        </footer>
    </div>

    <script>
        const nickInput = document.getElementById('nickname');
        const amountInput = document.getElementById('amount');
        const robuxTotal = document.getElementById('robuxTotal');
        const cashDisplay = document.getElementById('cashDisplay');
        const mainBtn = document.getElementById('mainBtn');
        const previewArea = document.getElementById('previewArea');
        
        const RATE = 0.04; // Cada Robux = R$ 0,04 (Mude se quiser)

        // Lógica para buscar usuário com Proxy (Essencial para Celular)
        let timer;
        nickInput.addEventListener('input', () => {
            clearTimeout(timer);
            const name = nickInput.value.trim();
            if (name.length >= 3) {
                timer = setTimeout(() => fetchUser(name), 1000);
            } else {
                previewArea.style.display = 'none';
            }
        });

        async function fetchUser(username) {
            try {
                // Usamos o AllOrigins para burlar o bloqueio de conexão do navegador (CORS)
                const target = `https://users.roblox.com/v1/usernames/users`;
                const proxy = `https://api.allorigins.win/get?url=${encodeURIComponent(target + "?usernames=" + username)}`;
                
                const res = await fetch(proxy);
                const outerData = await res.json();
                const data = JSON.parse(outerData.contents);

                if (data.data && data.data.length > 0) {
                    const user = data.data[0];
                    const thumbTarget = `https://thumbnails.roblox.com/v1/users/avatar-headshot?userIds=${user.id}&size=150x150&format=Png&isCircular=true`;
                    const thumbProxy = `https://api.allorigins.win/get?url=${encodeURIComponent(thumbTarget)}`;
                    
                    const thumbRes = await fetch(thumbProxy);
                    const thumbOuter = await thumbRes.json();
                    const thumbData = JSON.parse(thumbOuter.contents);

                    document.getElementById('userPhoto').src = thumbData.data[0].imageUrl;
                    document.getElementById('userDisplayName').innerText = user.displayName;
                    previewArea.style.display = 'flex';
                    document.getElementById('nickError').style.display = 'none';
                } else {
                    throw new Error();
                }
            } catch (e) {
                previewArea.style.display = 'none';
                document.getElementById('nickError').style.display = 'block';
            }
            validate();
        }

        function validate() {
            const val = parseFloat(amountInput.value);
            const hasNick = previewArea.style.display === 'flex';

            if (val > 0) {
                robuxTotal.innerText = Math.floor(val / RATE).toLocaleString();
                cashDisplay.innerText = val.toFixed(2).replace('.', ',');
            }

            const valOk = (val >= 5 && val <= 200);
            document.getElementById('valError').style.display = (val > 0 && !valOk) ? 'block' : 'none';

            mainBtn.disabled = !(valOk && hasNick);
        }

        amountInput.addEventListener('input', validate);

        mainBtn.addEventListener('click', () => {
            alert("Redirecionando para o pagamento seguro...");
            // Aqui você integraria com Mercado Pago ou outra Gateway
        });
    </script>
</body>
</html>

